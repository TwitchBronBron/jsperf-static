<!DOCTYPE html>
<html lang="en" class="js">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title id="pageTitle">jsPerf</title>

    <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
    <link rel="shortcut icon" href="./favicon.ico" />

    <link rel="stylesheet" href="./jsperf/main.src.css" />
    <link rel="stylesheet" href="./jsperf/default.min.css" />

    <!--[if lt IE 9]>
      <script src="./jsperf/html5.js"></script>
    <![endif]-->
</head>

<body>
    <article>
        <nav>
            <a href="index.html">Home</a>
            <a href="edit.html">Create new test case</a>
            <a href="faq.html">Frequently asked questions</a>
        </nav>
        <hgroup>
            <h1 id="title"></h1>
            <h2>JavaScript performance comparison</h2>
        </hgroup>

        <p class="meta">
            Test case created by
            <a id="authorURL" href=""></a>
            <time id="timeAgo"></time> ago
        </p>

        <section id="prep-code">
            <h2>Preparation code </h2>
            <pre><code class="init-html"></code></pre>
            <pre><code>&lt;script&gt;</code></pre>
            <div id="setup-code">
                <pre style="margin-left: 20px;"><code>Benchmark.prototype.setup = function() {</code></pre>
                <pre style="margin-left: 40px;"><code class="setup"></code></pre>
                <pre style="margin-left: 20px;"><code>}</code></pre>
            </div>
            <div id="teardown-code">
                <pre style="margin-left: 20px;"><code>Benchmark.prototype.teardown = function() {</code></pre>
                <pre style="margin-left: 40px;"><code class="teardown"></code></pre>
                <pre style="margin-left: 20px;"><code>}</code></pre>
            </div>
            <pre><code>&lt;/script&gt;</code></pre>
        </section>

        <section>
            <h2>Preparation code output</h2>
            <div id="user-output" class="user-output"></div>
        </section>

        <section id="runner">
            <h2>Test runner</h2>
            <p id="firebug">
                <strong>Warning! For accurate results, please disable Firebug before
                    running the tests.
                    <a href="http://localhost:3000/faq#firebug-warning">(Why?)</a></strong>
            </p>
            <p id="java"><strong>Java applet disabled.</strong></p>
            <p id="status">Ready to run.</p>
            <div id="controls" class="show">
                <button id="run" type="button">Run tests</button>
            </div>
            <table id="test-table">
                <caption>
                    Testing in <span id="user-agent"></span>
                </caption>
                <thead>
                    <tr>
                        <th colspan="2">Test</th>
                        <th title="Operations per second (higher is better)">Ops/sec</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

            <p>
                You can <a id="editLink" rel="nofollow">edit these tests</a> or <a id="cloneLink">clone these tests</a>
            </p>
        </section>

        <section id="comments" style="padding: 200px;">
        </section>
    </article>
    <script src="./lib/jquery.js"></script>
    <script src="./lib/json-url/json-url.js"></script>
    <script src="./util.js"></script>
    <script src="./jsperf/test.js"></script>

    <script type="text/javascript">
        $(function () {
            var id = getParameterByName("id");
            if (id) {
                //load suite from local storage
                var suite = JSON.parse(localStorage.getItem(id));
                $("#user-agent").html(getBrowserAndOS());
                $("#editLink").attr('href', 'edit.html?id=' + suite.id);
                $("#cloneLink").attr('href', 'edit.html?clone=true&id=' + suite.id);
                $("#pageTitle").html(suite.title + ' Â· jsPerf');
                $("#title").html(suite.title);
                $("#user-output").append(suite.initHTML);
                $("#timeAgo").html(timeSince(new Date(suite.editTime)));
                //populate the form with the suite data
                $("#id").val(suite.id);
                $("#authorEmail").val(suite.email);
                $("#authorURL").attr('href', suite.authorURL);
                $("#authorURL").text(suite.author);
                $("#title").val(suite.title);
                $("#info").val(suite.info);
                $("#initHTML").val(suite.initHTML);
                $("#setup").val(suite.setup);
                $("#teardown").val(suite.teardown);
                $("#prep-code .init-html").text(suite.initHTML);
                $("#prep-code .setup").text(suite.setup);
                $("#prep-code .teardown").text(suite.teardown);
                for (var i = 0; i < suite.tests.length; i++) {
                    var test = suite.tests[i];
                    var testNumber = i + 1;
                    //add the test to the test table
                    $('#test-table tbody').append('\
                        <tr>\
                            <th scope="row" id="title-' + testNumber + '" tabindex="0" title="Click to run this test again.">\
                                <div>' + test.title + '</div>\
                            </th>\
                            <td class="code">\
                             ' + (test.defer ? '<pre><code>// async test</code></pre>' : '') + '\
                                <pre><code>' + test.code + '</code></pre>\
                            </td>\
                            <td id="results-' + testNumber + '" class="results" title="">ready</td>\
                        </tr>\
                    ');

                    //make sure to call this AFTER the above html row is inserted
                    ui.add(test.title, {
                        defer: test.defer,
                        fn: test.code,
                    });

                    if (suite.setup) {
                        Benchmark.prototype.setup = suite.setup;
                    }
                    if (suite.teardown) {
                        Benchmark.prototype.teardown = suite.teardown;
                    }
                }
            } else {
                //populate two test snippets
                $("#add-test").click().click();
            }
        });
    </script>
</body>

</html>