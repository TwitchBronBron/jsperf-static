<!DOCTYPE html>
<!-- saved from url=(0037)http://localhost:3000/asdfasdf/1/edit -->
<html lang="en" class="js">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>asdf · jsPerf</title>

    <link rel="apple-touch-icon" href="./apple-touch-icon.png" />
    <link rel="shortcut icon" href="./favicon.ico" />

    <link rel="stylesheet" href="./jsperf/main.src.css" />
    <link rel="stylesheet" href="./jsperf/default.min.css" />

    <!--[if lt IE 9]>
      <script src="./jsperf/html5.js"></script>
    <![endif]-->
</head>

<body>
    <h1>
        <strong><em title="JavaScript">js</em>Perf</strong> — JavaScript performance playground
    </h1>
    <article>
        <h2>What is jsPerf?</h2>
        <p>jsPerf aims to provide an easy way to create and share <a href="/browse"
               title="View some examples by browsing the jsPerf test cases">test cases</a>, comparing the performance of
            different JavaScript snippets by running benchmarks. For more information, see<a href="./faq.html"
               title="Frequently asked questions">the FAQ</a>.</p>

        <h1>Editing <a href="http://localhost:3000/asdfasdf">asdf</a></h1>
        <form method="post" onsubmit="return false;">
            <input type="hidden" id="id" name="id" value="uf_Qphzf0P" />
            <fieldset>
                <h3>Your details (optional)</h3>
                <div>
                    <label for="author">Name</label>
                    <input
                           type="text"
                           name="author"
                           id="author"
                           value="TwitchBronBron" />
                </div>
                <div>
                    <label for="authorEmail">Email </label>
                    <label class="inline">
                        <input
                               type="email"
                               name="authorEmail"
                               id="authorEmail"
                               value="" />
                        (won’t be displayed; might be used for Gravatar)
                    </label>
                </div>
                <div>
                    <label for="authorURL">URL </label>
                    <input
                           type="url"
                           name="authorURL"
                           id="authorURL"
                           value="https://bronley.com" />
                </div>
            </fieldset>
            <fieldset>
                <h3>Test case details</h3>
                <div>
                    <label for="title">Title <em title="This field is required">*</em>
                    </label>
                    <input
                           type="text"
                           name="title"
                           id="title"
                           value="asdf"
                           required="" />

                    <input type="hidden" name="slug" id="slug" value="asdfasdf" />
                </div>
                <div>
                    <label for="info">Description
                        <span>(in case you feel further explanation is needed)</span>
                        <span>(Markdown syntax is allowed)</span>
                    </label>
                    <textarea name="info" id="info" maxlength="16777215"></textarea>
                </div>
                <fieldset>
                    <h3>Preparation code</h3>
                    <div>
                        <label for="initHTML">Preparation code HTML
                            <span>(this will be inserted in the <code>&lt;body&gt;</code> of a
                                valid HTML5 document in standards mode)
                            </span>
                            <span>(useful when testing DOM operations or including libraries)
                            </span>
                        </label>
                        <textarea name="initHTML" id="initHTML" maxlength="16777215"></textarea>
                    </div>
                    <div>
                        <label for="setup">Define <code>setup</code> for all tests
                            <span>(variables, functions, arrays or other objects that will be
                                used in the tests)
                            </span>
                            <span>(runs before each clocked test loop, outside of the timed
                                code region)
                            </span>
                            <span>(e.g. define local test variables, reset global variables,
                                clear <code>canvas</code>, etc.)
                            </span>
                            <span>(<a href="http://localhost:3000/faq#setup-teardown">see FAQ</a>)
                            </span>
                        </label>
                        <textarea name="setup" id="setup" maxlength="16777215"></textarea>
                    </div>
                    <div>
                        <label for="teardown">Define <code>teardown</code> for all tests
                            <span>(runs after each clocked test loop, outside of the timed code
                                region)
                            </span>
                            <span>(<a href="http://localhost:3000/faq#setup-teardown">see FAQ</a>)
                            </span>
                        </label>
                        <textarea name="teardown" id="teardown" maxlength="16777215">
ccc</textarea>
                    </div>
                </fieldset>
                <fieldset id="tests">
                    <h3>Code snippets to compare</h3>
                </fieldset>

                <p>
                    <em>NB: leave <code>Title</code> and <code>Code</code> blank to
                        remove code snippet.</em>
                </p>

                <div class="buttons">
                    <button class="submit" title="Save and view test case" onclick="saveAndViewTestCase()">Save test
                        case</button>
                </div>
            </fieldset>
        </form>
    </article>
    <script src="./nanoid.js"></script>
    <script src="./jsperf/jquery.js"></script>
    <script src="./jsperf/main.src.js"></script>
    <script src="./util.js"></script>
    <script type="text/javascript">
        $(function () {
            var id = getParameterByName("id");
            if (id) {
                //load suite from local storage
                var suite = JSON.parse(localStorage.getItem(id));
                //populate the form with the suite data
                $("#id").val(suite.id);
                $("#author").val(suite.author);
                $("#author").val(suite.author);
                $("#authorEmail").val(suite.email);
                $("#authorURL").val(suite.url);
                $("#title").val(suite.title);
                $("#info").val(suite.info);
                $("#initHTML").val(suite.initHTML);
                $("#setup").val(suite.setup);
                $("#teardown").val(suite.teardown);
                for (var i = 1; i <= suite.tests.length; i++) {
                    var prefix = "test[" + i + "]";
                    var test = suite.tests[i - 1];
                    //create a new snippet
                    $("#add-test").click();
                    document.getElementById(prefix + "[title]").value = test.title;
                    document.getElementById(prefix + "[defer]").checked = test.defer;
                    document.getElementById(prefix + "[code]").value = test.code;
                }
            } else {
                //populate two test snippets
                $("#add-test").click().click();
            }
        });

        function saveAndViewTestCase() {
            var form = $("form").first();
            var suite = {
                id: $("#id").val(),
                author: $("#author").val(),
                email: $("#authorEmail").val(),
                url: $("#authorURL").val(),
                title: $("#title").val(),
                info: $("#info").val(),
                initHTML: $("#initHTML").val(),
                setup: $("#setup").val(),
                teardown: $("#teardown").val(),
                tests: [],
            };
            if (!suite.id) {
                suite.id = nanoid();
            }

            var i = 1;
            var snippetData;
            while ((snippetData = getSnippetData(i++))) {
                suite.tests.push(snippetData);
            }

            //save the suite to local storage
            localStorage.setItem(suite.id, JSON.stringify(suite));
            //navigate to the test page
            window.location.href = 'test.html?id=' + suite.id;
        }

        function getSnippetData(index) {
            var prefix = "test[" + index + "]";
            var titleElement = document.getElementById(prefix + "[title]");
            if (titleElement) {
                return {
                    title: titleElement.value,
                    defer: document.getElementById(prefix + "[defer]").checked,
                    code: document.getElementById(prefix + "[code]").value,
                };
            }
        }
    </script>
</body>

</html>